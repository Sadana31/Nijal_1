<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <title>Shipping Bill Details</title>

  <link href="../styles/ms.css" rel="stylesheet" />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-4Q6Gf2aSP4eDXB8Miphtr37CMZZQ5oXLH2yaXMJ2w8e2ZtHTl7GptT4jmndRuHDT" crossorigin="anonymous" />
  <!-- Bootstrap Icons CDN -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet" />
</head>

<body>

  <!-- Sidebar container: sidebar.html content will be loaded here -->
  <div id="sidebar-placeholder"></div>

  <div class="main-content" id="main-content">
    <h2>SB Details Dashboard</h2>
    <br />

    <div class="search-container">
      <label for="search-currency">Search by Currency:</label>
      <input type="text" id="search-currency" placeholder="e.g. USD" />
    </div>

    <div style="text-align: right; margin-bottom: 20px;">
      <label for="entriesSelect">Show 
        <select id="entriesSelect" onchange="changeEntries()">
          <option value="15">5</option>
          <option value="30" selected>10</option>
          <option value="75">25</option>
          <option value="50">50</option>
          <option value="100">100</option>
        </select> entries
      </label>
    </div>
 
    <!-- Search Row Table -->
    <table style="width: 100%; border-collapse: collapse; margin-bottom: 5px;">
      <tr>
        <td></td>
        <td></td>
        <td></td>
        <td><input type="text" class="column-filter" onkeyup="filterTable(2, this.value)" placeholder="Shipping Bill"></td>
        <td><input type="text" class="column-filter" onkeyup="filterTable(3, this.value)" placeholder="Form No"></td>
        <td><input type="text" class="column-filter" onkeyup="filterTable(4, this.value)" placeholder="Date"></td>
        <td><input type="text" class="column-filter" onkeyup="filterTable(5, this.value)" placeholder="Port Code"></td>
        <td><input type="text" class="column-filter" onkeyup="filterTable(6, this.value)" placeholder="Bank Name"></td>
        <td><input type="text" class="column-filter" onkeyup="filterTable(7, this.value)" placeholder="Invoice Count"></td>
        <td><input type="text" class="column-filter" onkeyup="filterTable(8, this.value)" placeholder="Currency"></td>
        <td><input type="text" class="column-filter" onkeyup="filterTable(9, this.value)" placeholder="Export Value"></td>
        <td><input type="text" class="column-filter" onkeyup="filterTable(10, this.value)" placeholder="Outstanding"></td>
        <td><input type="text" class="column-filter" onkeyup="filterTable(11, this.value)" placeholder="Buyer Name"></td>
        <td>
          <div class="autocomplete">
            <input id="countryInput" type="text" placeholder="Start typing code or country..." class="column-filter" onkeyup="filterTable(12, this.value)"/>
          </div>
        </td>
      </tr>
    </table>

    <table border="1" id="mainTable" style="width: 100%; border-collapse: collapse;">
      <thead>
        <tr>
          <th></th>
          <th>Sr. No.</th>
          <th>Shipping Bill</th>
          <th>Form No</th>
          <th>Shipping Bill Date</th>
          <th>Port Code</th>
          <th>Bank Name</th>
          <th>Invoice Count</th>
          <th>FOB Currency</th>
          <th>Export Bill Value</th>
          <th>Bill Outstanding Value</th>
          <th>Buyer Name</th>
          <th>Buyer Country Code</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td class="expand-toggle" onclick="toggleExpander(this)" style="cursor: pointer; user-select:none; text-align:center; font-weight:bold;">
            ▸
          </td>
          <td>1</td>
          <td>1234567</td>
          <td>NA</td>
          <td>10-05-2024</td>
          <td>INBOM4</td>
          <td>ICICI Bank</td>
          <td>1</td>
          <td>USD</td>
          <td>$10,000.00</td>
          <td>$6,000.00</td>
          <td>ABC Limited</td>
          <td>US</td>
        </tr>

        <tr class="expander" style="display: none;">
          <td colspan="13" style="padding: 0;">
            <table border="1" style="width: 100%; border-collapse: collapse; margin: 0;">
              <thead>
                <tr>
                  <th></th>
                  <th>IE Code</th>
                  <th>Invoice Date</th>
                  <th>Realized Value</th>
                  <th>Buyer Address</th>
                  <th>Consignee Country Code</th>
                  <th>Port of Destination</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td></td>
                  <td>123456789</td>
                  <td>05-05-2024</td>
                  <td>$4,000.00</td>
                  <td>Test Address</td>
                  <td>IN</td>
                  <td>US</td>
                </tr>
              </tbody>

              <thead>
                <tr>
                  <th></th>
                  <th>Shipping Company</th>
                  <th>Vessel Name</th>
                  <th>BL Date</th>
                  <th>Commercial Invoice</th>
                  <th>Trade Terms</th>
                  <th>Commodity</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td></td>
                  <td>Maersk</td>
                  <td>Vessel 55555</td>
                  <td>06-05-2024</td>
                  <td>21127240024</td>
                  <td>-</td>
                  <td>Heavy metal goods</td>
                </tr>
              </tbody>
            </table>
          </td>
        </tr>
        <tr>
          <td onclick="toggleExpander(this)" style="cursor: pointer; user-select:none; text-align:center; font-weight:bold;">
            ▸
          </td>
          <td>2</td>
          <td>1234567</td>
          <td>NA</td>
          <td>10-05-2024</td>
          <td>INBOM4</td>
          <td>ICICI Bank</td>
          <td>1</td>
          <td>USD</td>
          <td>$10,000.00</td>
          <td>$6,000.00</td>
          <td>ABC Limited</td>
          <td>US</td>
        </tr>

        <tr class="expander" style="display: none;">
          <td colspan="13" style="padding: 0;">
            <table border="1" style="width: 100%; border-collapse: collapse; margin: 0;">
              <thead>
                <tr>
                  <th></th>
                  <th>IE Code</th>
                  <th>Invoice Date</th>
                  <th>Realized Value</th>
                  <th>Buyer Address</th>
                  <th>Consignee Country Code</th>
                  <th>Port of Destination</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td></td>
                  <td>123456789</td>
                  <td>05-05-2024</td>
                  <td>$4,000.00</td>
                  <td>Test Address</td>
                  <td>IN</td>
                  <td>US</td>
                </tr>
              </tbody>

              <thead>
                <tr>
                  <th></th>
                  <th>Shipping Company</th>
                  <th>Vessel Name</th>
                  <th>BL Date</th>
                  <th>Commercial Invoice</th>
                  <th>Trade Terms</th>
                  <th>Commodity</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td></td>
                  <td>Maersk</td>
                  <td>Vessel 55555</td>
                  <td>06-05-2024</td>
                  <td>21127240024</td>
                  <td>-</td>
                  <td>Heavy metal goods</td>
                </tr>
              </tbody>
            </table>
          </td>
        </tr>

        <tr class="expander" style="display: none;">
          <td colspan="13" style="padding: 0;">
            <table border="1" style="width: 100%; border-collapse: collapse; margin: 0;">
              <thead>
                <tr>
                  <th></th>
                  <th>IE Code</th>
                  <th>Invoice Date</th>
                  <th>Realized Value</th>
                  <th>Buyer Address</th>
                  <th>Consignee Country Code</th>
                  <th>Port of Destination</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td></td>
                  <td>123456789</td>
                  <td>05-05-2024</td>
                  <td>$4,000.00</td>
                  <td>Test Address</td>
                  <td>IN</td>
                  <td>US</td>
                </tr>
              </tbody>

              <thead>
                <tr>
                  <th></th>
                  <th>Shipping Company</th>
                  <th>Vessel Name</th>
                  <th>BL Date</th>
                  <th>Commercial Invoice</th>
                  <th>Trade Terms</th>
                  <th>Commodity</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td></td>
                  <td>Maersk</td>
                  <td>Vessel 55555</td>
                  <td>06-05-2024</td>
                  <td>21127240024</td>
                  <td>-</td>
                  <td>Heavy metal goods</td>
                </tr>
              </tbody>
            </table>
          </td>
        </tr>
        <tr>
          <td onclick="toggleExpander(this)" style="cursor: pointer; user-select:none; text-align:center; font-weight:bold;">
            ▸
          </td>
          <td>3</td>
          <td>1234567</td>
          <td>NA</td>
          <td>10-05-2024</td>
          <td>INBOM4</td>
          <td>ICICI Bank</td>
          <td>1</td>
          <td>USD</td>
          <td>$10,000.00</td>
          <td>$6,000.00</td>
          <td>ABC Limited</td>
          <td>US</td>
        </tr>

        <tr class="expander" style="display: none;">
          <td colspan="13" style="padding: 0;">
            <table border="1" style="width: 100%; border-collapse: collapse; margin: 0;">
              <thead>
                <tr>
                  <th></th>
                  <th>IE Code</th>
                  <th>Invoice Date</th>
                  <th>Realized Value</th>
                  <th>Buyer Address</th>
                  <th>Consignee Country Code</th>
                  <th>Port of Destination</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td></td>
                  <td>123456789</td>
                  <td>05-05-2024</td>
                  <td>$4,000.00</td>
                  <td>Test Address</td>
                  <td>IN</td>
                  <td>US</td>
                </tr>
              </tbody>

              <thead>
                <tr>
                  <th></th>
                  <th>Shipping Company</th>
                  <th>Vessel Name</th>
                  <th>BL Date</th>
                  <th>Commercial Invoice</th>
                  <th>Trade Terms</th>
                  <th>Commodity</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td></td>
                  <td>Maersk</td>
                  <td>Vessel 55555</td>
                  <td>06-05-2024</td>
                  <td>21127240024</td>
                  <td>-</td>
                  <td>Heavy metal goods</td>
                </tr>
              </tbody>
            </table>
          </td>
        </tr>
        <tr>
          <td onclick="toggleExpander(this)" style="cursor: pointer; user-select:none; text-align:center; font-weight:bold;">
            ▸
          </td>
          <td>4</td>
          <td>1234567</td>
          <td>NA</td>
          <td>10-05-2024</td>
          <td>INBOM4</td>
          <td>ICICI Bank</td>
          <td>1</td>
          <td>USD</td>
          <td>$10,000.00</td>
          <td>$6,000.00</td>
          <td>ABC Limited</td>
          <td>US</td>
        </tr>

        <tr class="expander" style="display: none;">
          <td colspan="13" style="padding: 0;">
            <table border="1" style="width: 100%; border-collapse: collapse; margin: 0;">
              <thead>
                <tr>
                  <th></th>
                  <th>IE Code</th>
                  <th>Invoice Date</th>
                  <th>Realized Value</th>
                  <th>Buyer Address</th>
                  <th>Consignee Country Code</th>
                  <th>Port of Destination</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td></td>
                  <td>123456789</td>
                  <td>05-05-2024</td>
                  <td>$4,000.00</td>
                  <td>Test Address</td>
                  <td>IN</td>
                  <td>US</td>
                </tr>
              </tbody>

              <thead>
                <tr>
                  <th></th>
                  <th>Shipping Company</th>
                  <th>Vessel Name</th>
                  <th>BL Date</th>
                  <th>Commercial Invoice</th>
                  <th>Trade Terms</th>
                  <th>Commodity</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td></td>
                  <td>Maersk</td>
                  <td>Vessel 55555</td>
                  <td>06-05-2024</td>
                  <td>21127240024</td>
                  <td>-</td>
                  <td>Heavy metal goods</td>
                </tr>
              </tbody>
            </table>
          </td>
        </tr>
        <tr>
          <td onclick="toggleExpander(this)" style="cursor: pointer; user-select:none; text-align:center; font-weight:bold;">
            ▸
          </td>
          <td>5</td>
          <td>1234567</td>
          <td>NA</td>
          <td>10-05-2024</td>
          <td>INBOM4</td>
          <td>ICICI Bank</td>
          <td>1</td>
          <td>USD</td>
          <td>$10,000.00</td>
          <td>$6,000.00</td>
          <td>ABC Limited</td>
          <td>US</td>
        </tr>

        <tr class="expander" style="display: none;">
          <td colspan="13" style="padding: 0;">
            <table border="1" style="width: 100%; border-collapse: collapse; margin: 0;">
              <thead>
                <tr>
                  <th></th>
                  <th>IE Code</th>
                  <th>Invoice Date</th>
                  <th>Realized Value</th>
                  <th>Buyer Address</th>
                  <th>Consignee Country Code</th>
                  <th>Port of Destination</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td></td>
                  <td>123456789</td>
                  <td>05-05-2024</td>
                  <td>$4,000.00</td>
                  <td>Test Address</td>
                  <td>IN</td>
                  <td>US</td>
                </tr>
              </tbody>

              <thead>
                <tr>
                  <th></th>
                  <th>Shipping Company</th>
                  <th>Vessel Name</th>
                  <th>BL Date</th>
                  <th>Commercial Invoice</th>
                  <th>Trade Terms</th>
                  <th>Commodity</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td></td>
                  <td>Maersk</td>
                  <td>Vessel 55555</td>
                  <td>06-05-2024</td>
                  <td>21127240024</td>
                  <td>-</td>
                  <td>Heavy metal goods</td>
                </tr>
              </tbody>
            </table>
          </td>
        </tr>
        <tr>
          <td onclick="toggleExpander(this)" style="cursor: pointer; user-select:none; text-align:center; font-weight:bold;">
            ▸
          </td>
          <td>6</td>
          <td>1234567</td>
          <td>NA</td>
          <td>10-05-2024</td>
          <td>INBOM4</td>
          <td>ICICI Bank</td>
          <td>1</td>
          <td>USD</td>
          <td>$10,000.00</td>
          <td>$6,000.00</td>
          <td>ABC Limited</td>
          <td>US</td>
        </tr>

        <tr class="expander" style="display: none;">
          <td colspan="13" style="padding: 0;">
            <table border="1" style="width: 100%; border-collapse: collapse; margin: 0;">
              <thead>
                <tr>
                  <th></th>
                  <th>IE Code</th>
                  <th>Invoice Date</th>
                  <th>Realized Value</th>
                  <th>Buyer Address</th>
                  <th>Consignee Country Code</th>
                  <th>Port of Destination</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td></td>
                  <td>123456789</td>
                  <td>05-05-2024</td>
                  <td>$4,000.00</td>
                  <td>Test Address</td>
                  <td>IN</td>
                  <td>US</td>
                </tr>
              </tbody>

              <thead>
                <tr>
                  <th></th>
                  <th>Shipping Company</th>
                  <th>Vessel Name</th>
                  <th>BL Date</th>
                  <th>Commercial Invoice</th>
                  <th>Trade Terms</th>
                  <th>Commodity</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td></td>
                  <td>Maersk</td>
                  <td>Vessel 55555</td>
                  <td>06-05-2024</td>
                  <td>21127240024</td>
                  <td>-</td>
                  <td>Heavy metal goods</td>
                </tr>
              </tbody>
            </table>
          </td>
        </tr>
        <tr>
          <td onclick="toggleExpander(this)" style="cursor: pointer; user-select:none; text-align:center; font-weight:bold;">
            ▸
          </td>
          <td>7</td>
          <td>1234567</td>
          <td>NA</td>
          <td>10-05-2024</td>
          <td>INBOM4</td>
          <td>ICICI Bank</td>
          <td>1</td>
          <td>USD</td>
          <td>$10,000.00</td>
          <td>$6,000.00</td>
          <td>ABC Limited</td>
          <td>US</td>
        </tr>

        

       
    </table>

    <br />

    <div class="button-group">
      <a href="add_sb.html" class="btn-go-to-add-sb"></a>
      <button onclick="window.location.href='add_sb.html'" class="btn">Add Shipping Bill</button>

      <a href="upload_sb.html" class="btn-go-to-add-sb"></a>
      <button onclick="window.location.href='upload_sb.html'" class="btn">Bulk Shipping Bill Upload</button>

      <button class="btn" onclick="downloadSample()">Export File</button>
    </div>

    <br />
  </div>

  <script>
    function toggleExpander(el) {
      const row = el.parentElement;
      const nextRow = row.nextElementSibling;
      const expanded = nextRow.style.display === 'table-row';
      nextRow.style.display = expanded ? 'none' : 'table-row';
      el.textContent = expanded ? '▸' : '▾';
    }
  </script>

  <script src="../sidebar/sidebar_loader.js" defer></script>

  <script>
    function downloadSample() {
      // Simulate download - replace with actual link
      alert("Downloading sample file...");
      window.location.href = "../files/sample_sb.csv"; // Replace with actual sample file path
    }
  </script>

  <script>
    function filterTable(colIndex, value) {
      const table = document.querySelector("table:nth-of-type(2) tbody"); // 2nd table is your main one
      const rows = table.querySelectorAll("tr");

      rows.forEach((row) => {
        if (row.classList.contains("expander")) return;

        const cells = row.querySelectorAll("td");
        const cell = cells[colIndex];
        const match = cell && cell.textContent.toLowerCase().includes(value.toLowerCase());
        row.style.display = match ? "" : "none";

        const expander = row.nextElementSibling;
        if (expander && expander.classList.contains("expander")) {
          expander.style.display = match ? "table-row" : "none";
        }
      });
    }
  </script>

  <script>
    function toggleExpander(el) {
        const mainRow = el.parentElement;
        const expanderRow = mainRow.nextElementSibling;

        if (!expanderRow || !expanderRow.classList.contains('expander')) return;

        if (expanderRow.style.display === 'table-row') {
          expanderRow.style.display = 'none';
          el.textContent = '▸';
        } else {
          expanderRow.style.display = 'table-row';
          el.textContent = '▾';
        }
      }

      function changeEntries() {
        const table = document.getElementById('mainTable');
        const rows = Array.from(table.querySelectorAll('tbody > tr'));

        // Filter main rows (ignore expanders)
        const mainRows = rows.filter(row => !row.classList.contains('expander'));
        const selected = parseInt(document.getElementById('entriesSelect').value);

        let shownCount = 0;
        for (let i = 0; i < mainRows.length; i++) {
          const mainRow = mainRows[i];
          const expanderRow = mainRow.nextElementSibling && mainRow.nextElementSibling.classList.contains('expander')
            ? mainRow.nextElementSibling
            : null;

          if (shownCount < selected) {
            mainRow.style.display = '';
            if (expanderRow) {
              const toggleCell = mainRow.querySelector('.expand-toggle');
              expanderRow.style.display = (toggleCell && toggleCell.textContent === '▾') ? 'table-row' : 'none';
            }
            shownCount++;
          } else {
            mainRow.style.display = 'none';
            if (expanderRow) expanderRow.style.display = 'none';

            // Reset toggle arrow
            const toggleCell = mainRow.querySelector('.expand-toggle');
            if (toggleCell) toggleCell.textContent = '▸';
          }
        }
      }

      window.onload = () => {
        changeEntries();
      };
    </script>


  <script src="../validations/country.js"></script>


</body>

</html>