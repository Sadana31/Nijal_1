<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Modify Shipping Bill</title>
  <link rel="stylesheet" href="../styles/add_files.css" />

  <style>
    .prefilled {
        background-color:rgb(240, 237, 237); /* light grey */
    }
  </style>
</head>
<body>
  <div id="sidebar-placeholder"></div>

  <div class="main-content" id="main-content">
    <h2>Modify Shipping Bill</h2>
    <form id="modifySbForm" novalidate>
      <fieldset>
        <legend>Shipping Bill Basic Details</legend>
        <div class="form-grid">
          <div>
            <label for="shippingBill">Shipping Bill*:</label>
            <input type="number" id="shippingBill" name="shippingBill" maxlength="10" />
          </div>
          <div>
            <label for="formNo">Form No*:</label>
            <input type="text" id="formNo" name="formNo" maxlength="12" />
          </div>
          <div>
            <label for="sbDate">Shipping Bill Date*:</label>
            <input type="date" id="sbDate" name="sbDate" />
          </div>
          <div>
            <label for="portCode">Port Code*:</label>
            <input type="text" id="portCode" name="portCode" maxlength="6" />
          </div>
          <div>
            <label for="exportAgency">Export Agency*:</label>
            <input type="text" id="exportAgency" name="exportAgency" maxlength="10" />
          </div>
          <div>
            <label for="adCode">AD Code*:</label>
            <input type="text" id="adCode" name="adCode" maxlength="8" />
          </div>
          <div>
            <label for="bankName">Bank Name*:</label>
            <input type="text" id="bankName" name="bankName" maxlength="20" />
          </div>
          <div>
            <label for="ieCode">IE Code*:</label>
            <input type="text" id="ieCode" name="ieCode" maxlength="10" />
          </div>
          <div>
            <label for="invoiceNo">Invoice No*:</label>
            <input type="text" id="invoiceNo" name="invoiceNo" maxlength="30" />
          </div>
          <div>
            <label for="invoiceDate">Invoice Date*:</label>
            <input type="date" id="invoiceDate" name="invoiceDate" />
          </div>
          <div>
            <label for="fobCurrency">FOB Currency*:</label>
            <input type="text" id="fobCurrency" name="fobCurrency" maxlength="3" />
          </div>
          <div>
            <label for="exportBillValue">Export Bill Value*:</label>
            <input type="number" step="0.01" id="exportBillValue" name="exportBillValue" />
          </div>
          <div>
            <label for="billRealizedValue">Bill Realized Value*:</label>
            <input type="number" step="0.01" id="billRealizedValue" name="billRealizedValue" />
          </div>
          <div>
            <label for="billOutstandingValue">Bill Outstanding Value*:</label>
            <input type="number" step="0.01" id="billOutstandingValue" name="billOutstandingValue" />
          </div>
        </div>
      </fieldset>

      <fieldset>
        <legend>Other Details</legend>
        <div class="form-grid">
          <div>
            <label for="buyerName">Buyer Name:</label>
            <input type="text" id="buyerName" name="buyerName" maxlength="30" />
          </div>
          <div>
            <label for="buyerAddress">Buyer Address:</label>
            <input type="text" id="buyerAddress" name="buyerAddress" maxlength="50" />
          </div>
          <div>
            <label for="buyerCountryCode">Buyer Country Code:</label>
            <input type="text" id="buyerCountryCode" name="buyerCountryCode" maxlength="2" />
          </div>
          <div>
            <label for="consigneeName">Consignee Name:</label>
            <input type="text" id="consigneeName" name="consigneeName" maxlength="30" />
          </div>
          <div>
            <label for="consigneeCountryCode">Consignee Country Code:</label>
            <input type="text" id="consigneeCountryCode" name="consigneeCountryCode" maxlength="50" />
          </div>
          <div>
            <label for="originGoods">Origin of Goods:</label>
            <input type="text" id="originGoods" name="originGoods" maxlength="2" />
          </div>
          <div>
            <label for="portDestination">Port of Destination:</label>
            <input type="text" id="portDestination" name="portDestination" maxlength="2" />
          </div>
          <div>
            <label for="tenorInvoice">Tenor as per Invoice:</label>
            <input type="text" id="tenorInvoice" name="tenorInvoice" maxlength="40" />
          </div>
          <div>
            <label for="commodityDesc">Commodity Description:</label>
            <input type="text" id="commodityDesc" name="commodityDesc" maxlength="100" />
          </div>
          <div>
            <label for="shippingCompany">Shipping Company Name:</label>
            <input type="text" id="shippingCompany" name="shippingCompany" maxlength="20" />
          </div>
          <div>
            <label for="blAwbNo">BL/AWB No:</label>
            <input type="text" id="blAwbNo" name="blAwbNo" maxlength="20" />
          </div>
          <div>
            <label for="vesselName">Vessel Name:</label>
            <input type="text" id="vesselName" name="vesselName" maxlength="40" />
          </div>
          <div>
            <label for="blDate">BL Date:</label>
            <input type="date" id="blDate" name="blDate" />
          </div>
          <div>
            <label for="commercialInvoice">Commercial Invoice:</label>
            <input type="text" id="commercialInvoice" name="commercialInvoice" maxlength="40" />
          </div>
          <div>
            <label for="tradeTerms">Trade Terms:</label>
            <input type="text" id="tradeTerms" name="tradeTerms" maxlength="3" />
          </div>
        </div>
      </fieldset>

      <button type="button" class="btn-submit" onclick="window.location.href = '../screens/sb.html'">Update</button>
    </form>
  </div>

    <script src="../sidebar/sidebar_loader.js" defer></script>
    <script>
  window.onload = function () {
    const params = new URLSearchParams(window.location.search);

    const fieldMap = {
      shippingbill: "shippingBill",
      formno: "formNo",
      shippingbilldate: "sbDate",
      portcode: "portCode",
      exportagency: "exportAgency",
      adcode: "adCode",
      bankname: "bankName",
      iecode: "ieCode",
      invoiceno: "invoiceNo",
      invoicedate: "invoiceDate",
      fobcurrency: "fobCurrency",
      exportbillvalue: "exportBillValue",
      billrealizedvalue: "billRealizedValue",
      billoutstandingvalue: "billOutstandingValue",
      buyername: "buyerName",
      buyeraddress: "buyerAddress",
      buyercountrycode: "buyerCountryCode",
      consigneename: "consigneeName",
      consigneecountrycode: "consigneeCountryCode",
      origingoods: "originGoods",
      portdestination: "portDestination",
      tenorinvoice: "tenorInvoice",
      commodity: "commodityDesc",
      shippingcompany: "shippingCompany",
      blawbno: "blAwbNo",
      vesselname: "vesselName",
      bldate: "blDate",
      commercialinvoice: "commercialInvoice",
      tradeterms: "tradeTerms"
    };

    for (const [key, value] of params.entries()) {
      const id = fieldMap[key.toLowerCase()];
      if (id) {
        const input = document.getElementById(id);
        if (input) {
          let decodedValue = decodeURIComponent(value.replace(/\+/g, " "));

          // Convert dd-mm-yyyy to yyyy-mm-dd for <input type="date">
          if (input.type === "date" && /^\d{2}-\d{2}-\d{4}$/.test(decodedValue)) {
            const [dd, mm, yyyy] = decodedValue.split("-");
            decodedValue = `${yyyy}-${mm}-${dd}`;
          }

          // Remove commas from number fields
          if (input.type === "number") {
            decodedValue = decodedValue.replace(/,/g, "");
          }

          input.value = decodedValue;
          input.classList.add("prefilled"); // Add grey background to filled input
        }
      }
    }

    // Set button text to Update
    const submitBtn = document.querySelector(".btn-submit");
    if (submitBtn) submitBtn.textContent = "Update";

  };
</script>


</body>
</html>
